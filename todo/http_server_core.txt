----- TODO AFTER PARSING THE REQUEST -------------------------------------------

[Map request to a route]

- Call your mate's routing API
- Determine:
	* which file to serve
	* whether to run CGI
	* allowed methods
	* upload directory
	* redirects

[Handle cookies and session management]

- Read `Cookie` headers from request
- Look up session in memory or using session ID
- Create new session if none exists or expired
- Attach session data to request context for route handlers

[Build the HTTP response]

- Status line
- Headers
- Content-Length or Transfer-Encoding
- Body (static file, upload result, CGI output, error page, etc)

[Set cookies for session management]

- If session was created or modified -> send `Set-Cookie` header
- Include any other cookies the route requires

[Ports]

- One port per server, and possibly different servers. It's not asked in the 
subject, but why not.
